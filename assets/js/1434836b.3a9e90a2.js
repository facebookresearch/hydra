"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[494],{1106:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>p,frontMatter:()=>r,metadata:()=>a,toc:()=>s});const a=JSON.parse('{"id":"upgrades/0.11_to_1.0/adding_a_package_directive","title":"Adding an @package directive","description":"Adding an @package directive","source":"@site/docs/upgrades/0.11_to_1.0/adding_a_package_directive.md","sourceDirName":"upgrades/0.11_to_1.0","slug":"/upgrades/0.11_to_1.0/adding_a_package_directive","permalink":"/docs/upgrades/0.11_to_1.0/adding_a_package_directive","draft":false,"unlisted":false,"editUrl":"https://github.com/facebookresearch/hydra/edit/main/website/docs/upgrades/0.11_to_1.0/adding_a_package_directive.md","tags":[],"version":"current","lastUpdatedBy":"Ryan Soklaski","lastUpdatedAt":1761571287000,"frontMatter":{"id":"adding_a_package_directive","title":"Adding an @package directive","hide_title":true},"sidebar":"docs","previous":{"title":"Config path changes","permalink":"/docs/upgrades/0.11_to_1.0/config_path_changes"},"next":{"title":"strict flag mode deprecation","permalink":"/docs/upgrades/0.11_to_1.0/strict_mode_flag_deprecated"}}');var d=i(74848),t=i(28453);const r={id:"adding_a_package_directive",title:"Adding an @package directive",hide_title:!0},c=void 0,o={},s=[{value:"Adding an @package directive",id:"adding-an-package-directive",level:2},{value:"Upgrade instructions:",id:"upgrade-instructions",level:2},{value:"Recommended (~10 seconds per config file):",id:"recommended-10-seconds-per-config-file",level:3},{value:"Alternative (not recommended):",id:"alternative-not-recommended",level:3},{value:"Example for <code>case 1</code>:",id:"example-for-case-1",level:3},{value:"Before",id:"before",level:4},{value:"After",id:"after",level:4},{value:"Example for <code>case 2</code>:",id:"example-for-case-2",level:3}];function l(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.h2,{id:"adding-an-package-directive",children:"Adding an @package directive"}),"\n",(0,d.jsxs)(n.p,{children:["Hydra 1.0 introduces the concept of a config ",(0,d.jsx)(n.code,{children:"package"}),". A ",(0,d.jsx)(n.code,{children:"package"})," is the common parent\npath of all nodes in the config file."]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["In Hydra 0.11, there was an implicit default of ",(0,d.jsx)(n.code,{children:"_global_"}),' ("")']}),"\n",(0,d.jsxs)(n.li,{children:["In Hydra 1.1 the default will be ",(0,d.jsx)(n.code,{children:"_group_"})," (the name of the config group)."]}),"\n",(0,d.jsxs)(n.li,{children:["Hydra 1.0 maintains the implicit default of ",(0,d.jsx)(n.code,{children:"_global_"})," and issues a warning for\nany config group file without a ",(0,d.jsx)(n.code,{children:"@package"})," directive."]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["By adding an explicit ",(0,d.jsx)(n.code,{children:"@package"})," to these configs now, you guarantee that your configs\nwill not break when you upgrade to Hydra 1.1."]}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"@package"})," directive is described in details ",(0,d.jsx)(n.a,{href:"/docs/advanced/overriding_packages",children:"here"}),"."]}),"\n",(0,d.jsx)(n.h2,{id:"upgrade-instructions",children:"Upgrade instructions:"}),"\n",(0,d.jsx)(n.h3,{id:"recommended-10-seconds-per-config-file",children:"Recommended (~10 seconds per config file):"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Case 1"}),": For config files where the common parent path matches the config group name:"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Add ",(0,d.jsx)(n.code,{children:"# @package _group_"})," to the top of every config group file"]}),"\n",(0,d.jsx)(n.li,{children:"Remove the common parent path config file like in the example below."}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Case 2"}),": For files without a common parent path:"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Add ",(0,d.jsx)(n.code,{children:"# @package _global_"}),"."]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"alternative-not-recommended",children:"Alternative (not recommended):"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["If you do not want to restructure the config at this time use ",(0,d.jsx)(n.code,{children:"Case 2"})," for all your config files."]}),"\n"]}),"\n",(0,d.jsxs)(n.h3,{id:"example-for-case-1",children:["Example for ",(0,d.jsx)(n.code,{children:"case 1"}),":"]}),"\n",(0,d.jsx)(n.h4,{id:"before",children:"Before"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",metastring:'title="db/mysql.yaml"',children:"db:\n  driver: mysql\n  host: localhost\n  port: 3306\n"})}),"\n",(0,d.jsx)(n.h4,{id:"after",children:"After"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",metastring:'title="db/mysql.yaml"',children:"# @package _group_\ndriver: mysql\nhost: localhost\nport: 3306\n"})}),"\n",(0,d.jsx)(n.p,{children:"The interpretations of the before and after files are identical."}),"\n",(0,d.jsxs)(n.h3,{id:"example-for-case-2",children:["Example for ",(0,d.jsx)(n.code,{children:"case 2"}),":"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",metastring:'title="env/prod.yaml"',children:"# @package _global_\ndb:\n  driver: mysql\n  host: 10.0.0.11\n  port: 3306\n\nwebserver:\n  host: 10.0.0.11\n  port: 443\n"})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(l,{...e})}):l(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>c});var a=i(96540);const d={},t=a.createContext(d);function r(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);