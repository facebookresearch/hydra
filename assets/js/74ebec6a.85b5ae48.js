"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9440],{2720:(r,e,n)=>{n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"tutorials/basic/running_your_app/working_directory","title":"Output/Working directory","description":"Hydra solves the problem of your needing to specify a new output directory for each run, by","source":"@site/versioned_docs/version-1.0/tutorials/basic/running_your_app/3_working_directory.md","sourceDirName":"tutorials/basic/running_your_app","slug":"/tutorials/basic/running_your_app/working_directory","permalink":"/docs/1.0/tutorials/basic/running_your_app/working_directory","draft":false,"unlisted":false,"editUrl":"https://github.com/facebookresearch/hydra/edit/main/website/versioned_docs/version-1.0/tutorials/basic/running_your_app/3_working_directory.md","tags":[],"version":"1.0","lastUpdatedBy":"Ryan Soklaski","lastUpdatedAt":1761571287000,"sidebarPosition":3,"frontMatter":{"id":"working_directory","title":"Output/Working directory","sidebar_label":"Output/Working directory"},"sidebar":"docs","previous":{"title":"Multi-run","permalink":"/docs/1.0/tutorials/basic/running_your_app/multi-run"},"next":{"title":"Logging","permalink":"/docs/1.0/tutorials/basic/running_your_app/logging"}}');var o=n(74848),t=n(28453),a=n(49595);const s={id:"working_directory",title:"Output/Working directory",sidebar_label:"Output/Working directory"},d=void 0,c={},l=[{value:"Disabling output subdir",id:"disabling-output-subdir",level:3},{value:"Original working directory",id:"original-working-directory",level:3}];function u(r){const e={a:"a",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...r.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.C,{to:"examples/tutorials/basic/running_your_hydra_app/3_working_directory"}),"\n",(0,o.jsx)(e.p,{children:"Hydra solves the problem of your needing to specify a new output directory for each run, by\ncreating a directory for each run and executing your code within that working directory."}),"\n",(0,o.jsx)(e.p,{children:"The working directory is used to:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Store the output for the application (For example, a database dump file)"}),"\n",(0,o.jsx)(e.li,{children:"Store the Hydra output for the run (Configuration, Logs etc)"}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"Every time you run the app, a new working directory is created:"}),"\n",(0,o.jsxs)(e.p,{children:["Python file: ",(0,o.jsx)(e.code,{children:"my_app.py"})]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'import os\nimport hydra\nfrom omegaconf import DictConfig\n\n@hydra.main()\ndef my_app(cfg: DictConfig) -> None:\n    print("Working directory : {}".format(os.getcwd()))\n\n$ python my_app.py\nWorking directory : /home/omry/dev/hydra/outputs/2019-09-25/15-16-17\n\n$ python my_app.py\nWorking directory : /home/omry/dev/hydra/outputs/2019-09-25/15-16-19\n'})}),"\n",(0,o.jsx)(e.p,{children:"Let's take a look at one of the working directories:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-text",children:"$ tree outputs/2019-09-25/15-16-17\noutputs/2019-09-25/15-16-17\n\u251c\u2500\u2500 .hydra\n\u2502   \u251c\u2500\u2500 config.yaml\n\u2502   \u251c\u2500\u2500 hydra.yaml\n\u2502   \u2514\u2500\u2500 overrides.yaml\n\u2514\u2500\u2500 my_app.log\n"})}),"\n",(0,o.jsxs)(e.p,{children:["We have the Hydra output directory (",(0,o.jsx)(e.code,{children:".hydra"})," by default) and the application log file.\nInside the configuration output directory we have:"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"config.yaml"}),": A dump of the user specified configuration"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"hydra.yaml"}),": A dump of the Hydra configuration"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"overrides.yaml"}),": The command line overrides used"]}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"And in the main output directory:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"my_app.log"}),": A log file created for this run"]}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"disabling-output-subdir",children:"Disabling output subdir"}),"\n",(0,o.jsxs)(e.p,{children:["You can change the ",(0,o.jsx)(e.code,{children:".hydra"})," subdirectory name by overriding ",(0,o.jsx)(e.code,{children:"hydra.output_subdir"}),".\nYou can disable its creation by overriding ",(0,o.jsx)(e.code,{children:"hydra.output_subdir"})," to ",(0,o.jsx)(e.code,{children:"null"}),"."]}),"\n",(0,o.jsx)(e.h3,{id:"original-working-directory",children:"Original working directory"}),"\n",(0,o.jsx)(e.p,{children:"You can still access the original working directory if you need to:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"import os\nfrom omegaconf import DictConfig\nimport hydra\n\n@hydra.main()\ndef my_app(_cfg: DictConfig) -> None:\n    print(f\"Current working directory : {os.getcwd()}\")\n    print(f\"Orig working directory    : {hydra.utils.get_original_cwd()}\")\n    print(f\"to_absolute_path('foo')   : {hydra.utils.to_absolute_path('foo')}\")\n    print(f\"to_absolute_path('/foo')  : {hydra.utils.to_absolute_path('/foo')}\")\n\nif __name__ == \"__main__\":\n    my_app()\n\n\n$ python examples/tutorial/8_working_directory/original_cwd.py\nCurrent working directory  : /Users/omry/dev/hydra/outputs/2019-10-23/10-53-03\nOriginal working directory : /Users/omry/dev/hydra\nto_absolute_path('foo')    : /Users/omry/dev/hydra/foo\nto_absolute_path('/foo')   : /foo\n"})}),"\n",(0,o.jsxs)(e.p,{children:["Working directory can be ",(0,o.jsx)(e.a,{href:"/docs/1.0/configure_hydra/workdir",children:"customized"}),"."]})]})}function p(r={}){const{wrapper:e}={...(0,t.R)(),...r.components};return e?(0,o.jsx)(e,{...r,children:(0,o.jsx)(u,{...r})}):u(r)}},28453:(r,e,n)=>{n.d(e,{R:()=>a,x:()=>s});var i=n(96540);const o={},t=i.createContext(o);function a(r){const e=i.useContext(t);return i.useMemo(function(){return"function"==typeof r?r(e):{...e,...r}},[e,r])}function s(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(o):r.components||o:a(r.components),i.createElement(t.Provider,{value:e},r.children)}},49595:(r,e,n)=>{n.d(e,{A:()=>d,C:()=>c});n(96540);var i=n(28774),o=n(44586),t=n(48295),a=n(74848);function s(r){const e=(0,t.ir)();return(0,o.default)().siteConfig.customFields.githubLinkVersionToBaseUrl[e?.name??"current"]+r}function d(r){return(0,a.jsx)(i.default,{...r,to:s(r.to),target:"_blank"})}function c(r){const e=r.text??"Example (Click Here)";return(0,a.jsxs)(d,{...r,children:[(0,a.jsx)("span",{children:"\xa0"}),(0,a.jsx)("img",{src:"https://img.shields.io/badge/-"+e+"-informational",alt:"Example (Click Here)"})]})}}}]);