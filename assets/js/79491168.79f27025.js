"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8022],{28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>d});var s=i(96540);const l={},t=s.createContext(l);function r(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(t.Provider,{value:n},e.children)}},49595:(e,n,i)=>{i.d(n,{A:()=>o,C:()=>a});i(96540);var s=i(28774),l=i(44586),t=i(48295),r=i(74848);function d(e){const n=(0,t.ir)();return(0,l.default)().siteConfig.customFields.githubLinkVersionToBaseUrl[n?.name??"current"]+e}function o(e){return(0,r.jsx)(s.default,{...e,to:d(e.to),target:"_blank"})}function a(e){const n=e.text??"Example (Click Here)";return(0,r.jsxs)(o,{...e,children:[(0,r.jsx)("span",{children:"\xa0"}),(0,r.jsx)("img",{src:"https://img.shields.io/badge/-"+n+"-informational",alt:"Example (Click Here)"})]})}},81843:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>d,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"advanced/plugins/develop","title":"Plugin development","description":"If you develop plugins, please join the Plugin developer announcement chat channel.","source":"@site/versioned_docs/version-1.2/advanced/plugins/develop.md","sourceDirName":"advanced/plugins","slug":"/advanced/plugins/develop","permalink":"/docs/1.2/advanced/plugins/develop","draft":false,"unlisted":false,"editUrl":"https://github.com/facebookresearch/hydra/edit/main/website/versioned_docs/version-1.2/advanced/plugins/develop.md","tags":[],"version":"1.2","lastUpdatedBy":"jesszzzz","lastUpdatedAt":1754330894000,"frontMatter":{"id":"develop","title":"Plugin development","sidebar_label":"Plugin development"},"sidebar":"docs","previous":{"title":"Plugins Overview","permalink":"/docs/1.2/advanced/plugins/overview"},"next":{"title":"Application packaging","permalink":"/docs/1.2/advanced/app_packaging"}}');var l=i(74848),t=i(28453),r=i(49595);const d={id:"develop",title:"Plugin development",sidebar_label:"Plugin development"},o=void 0,a={},c=[{value:"Automatic Plugin discovery process",id:"automatic-plugin-discovery-process",level:2},{value:"Plugin registration via the <code>Plugins.register</code> method",id:"plugin-registration-via-the-pluginsregister-method",level:2},{value:"Getting started",id:"getting-started",level:2}];function u(e){const n={admonition:"admonition",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsxs)(n.p,{children:["If you develop plugins, please join the ",(0,l.jsx)("a",{href:"https://hydra-framework.zulipchat.com/#narrow/stream/233935-Hydra-plugin.20dev.20announcements",children:"Plugin developer announcement chat channel"}),"."]})}),"\n","\n",(0,l.jsx)(n.p,{children:"Hydra plugins must be registered before they can be used. There are two ways to register a plugin:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["via the automatic plugin discovery process, which discovers plugins located in the ",(0,l.jsx)(n.code,{children:"hydra_plugins"})," namespace package"]}),"\n",(0,l.jsxs)(n.li,{children:["by calling the ",(0,l.jsx)(n.code,{children:"register"})," method on Hydra's ",(0,l.jsx)(n.code,{children:"Plugins"})," singleton class"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"automatic-plugin-discovery-process",children:"Automatic Plugin discovery process"}),"\n",(0,l.jsx)(n.p,{children:"If you create a Plugin and want it to be discovered automatically by Hydra, keep the following things in mind:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Hydra plugins can be either a standalone Python package, or a part of your existing Python package.\nIn both cases - They should be in the namespace module ",(0,l.jsx)(n.code,{children:"hydra_plugins"})," (This is a top level module, Your plugin will ",(0,l.jsx)(n.strong,{children:"NOT"})," be discovered if you place it in ",(0,l.jsx)(n.code,{children:"mylib.hydra_plugins"}),")."]}),"\n",(0,l.jsxs)(n.li,{children:["Do ",(0,l.jsx)(n.strong,{children:"NOT"})," place an ",(0,l.jsx)(n.code,{children:"__init__.py"})," file in ",(0,l.jsx)(n.code,{children:"hydra_plugins"})," (doing so may break other installed Hydra plugins)."]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["The plugin discovery process runs whenever Hydra starts. During plugin discovery, Hydra scans for plugins in all the submodules of ",(0,l.jsx)(n.code,{children:"hydra_plugins"}),". Hydra will import each module and look for plugins defined in that module.\nAny module under ",(0,l.jsx)(n.code,{children:"hydra_plugins"})," that is slow to import will slow down the startup of ",(0,l.jsx)(n.strong,{children:"ALL"})," Hydra applications.\nPlugins with expensive imports can exclude individual files from Hydra's plugin discovery process by prefixing them with ",(0,l.jsx)(n.code,{children:"_"})," (but not ",(0,l.jsx)(n.code,{children:"__"}),").\nFor example, the file ",(0,l.jsx)(n.code,{children:"_my_plugin_lib.py"})," would not be imported and scanned, while ",(0,l.jsx)(n.code,{children:"my_plugin_lib.py"})," would be."]}),"\n",(0,l.jsxs)(n.h2,{id:"plugin-registration-via-the-pluginsregister-method",children:["Plugin registration via the ",(0,l.jsx)(n.code,{children:"Plugins.register"})," method"]}),"\n",(0,l.jsxs)(n.p,{children:["Plugins can be manually registered by calling the ",(0,l.jsx)(n.code,{children:"register"})," method on the instance of Hydra's ",(0,l.jsx)(n.code,{children:"Plugins"})," singleton class."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from hydra.core.plugins import Plugins\nfrom hydra.plugins.plugin import Plugin\n\nclass MyPlugin(Plugin):\n  ...\n\ndef register_my_plugin() -> None:\n    """Hydra users should call this function before invoking @hydra.main"""\n    Plugins.instance().register(MyPlugin)\n'})}),"\n",(0,l.jsx)(n.h2,{id:"getting-started",children:"Getting started"}),"\n",(0,l.jsx)(n.p,{children:"The best way to get started developing a Hydra plugin is to base your new plugin on one of the example plugins:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Copy the subtree of the relevant ",(0,l.jsx)(r.A,{to:"examples/plugins",children:"example plugin"})," into a standalone project."]}),"\n",(0,l.jsxs)(n.li,{children:["Edit ",(0,l.jsx)(n.code,{children:"setup.py"}),", rename the plugin module, for example from ",(0,l.jsx)(n.code,{children:"hydra_plugins.example_xyz_plugin"})," to ",(0,l.jsx)(n.code,{children:"hydra_plugins.my_xyz_plugin"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Install the new plugin (Run this in the plugin directory: ",(0,l.jsx)(n.code,{children:"pip install -e ."}),")"]}),"\n",(0,l.jsx)(n.li,{children:"Run the included example app and make sure that the plugin is discovered:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"$ python example/my_app.py --info plugins\nInstalled Hydra Plugins\n***********************\n        ...\n        Launcher:\n        ---------\n                MyLauncher\n        ...\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Run the example application to see that that your plugin is doing something."}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"[Optional]"})," If you want the plugin be embedded in your existing application/library, move the ",(0,l.jsx)(n.code,{children:"hydra_plugins"})," directory\nand make sure that it's included as a namespace module in your final Python package. See the ",(0,l.jsx)(n.code,{children:"setup.py"}),"\nfile included with the example plugin for hints (typically this involves using ",(0,l.jsx)(n.code,{children:'find_namespace_packages(include=["hydra_plugins.*"])'}),")."]}),"\n",(0,l.jsx)(n.li,{children:"Hack on your plugin, Ensure that the recommended tests and any tests you want to add are passing."}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(u,{...e})}):u(e)}}}]);