"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5367],{28453:(e,n,a)=>{a.d(n,{R:()=>r,x:()=>c});var i=a(96540);const t={},s=i.createContext(t);function r(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(s.Provider,{value:n},e.children)}},49595:(e,n,a)=>{a.d(n,{A:()=>o,C:()=>d});a(96540);var i=a(28774),t=a(44586),s=a(48295),r=a(74848);function c(e){const n=(0,s.ir)();return(0,t.default)().siteConfig.customFields.githubLinkVersionToBaseUrl[n?.name??"current"]+e}function o(e){return(0,r.jsx)(i.default,{...e,to:c(e.to),target:"_blank"})}function d(e){const n=e.text??"Example (Click Here)";return(0,r.jsxs)(o,{...e,children:[(0,r.jsx)("span",{children:"\xa0"}),(0,r.jsx)("img",{src:"https://img.shields.io/badge/-"+n+"-informational",alt:"Example (Click Here)"})]})}},99150:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"advanced/search_path","title":"Config Search Path","description":"The Config Search Path is a list of paths that Hydra searches in order to find non-primary configs. It is","source":"@site/versioned_docs/version-1.3/advanced/search_path.md","sourceDirName":"advanced","slug":"/advanced/search_path","permalink":"/docs/1.3/advanced/search_path","draft":false,"unlisted":false,"editUrl":"https://github.com/facebookresearch/hydra/edit/main/website/versioned_docs/version-1.3/advanced/search_path.md","tags":[],"version":"1.3","lastUpdatedBy":"dependabot[bot]","lastUpdatedAt":1756143349000,"frontMatter":{"id":"search_path","title":"Config Search Path"},"sidebar":"docs","previous":{"title":"Compose API","permalink":"/docs/1.3/advanced/compose_api"},"next":{"title":"Plugins Overview","permalink":"/docs/1.3/advanced/plugins/overview"}}');var t=a(74848),s=a(28453),r=a(49595);const c={id:"search_path",title:"Config Search Path"},o=void 0,d={},h=[{value:"Using <code>@hydra.main()</code>",id:"using-hydramain",level:4},{value:"Overriding <code>hydra.searchpath</code> config",id:"overriding-hydrasearchpath-config",level:4},{value:"Overriding <code>--config-dir</code> from the command line",id:"overriding---config-dir-from-the-command-line",level:4},{value:"Creating a <code>SearchPathPlugin</code>",id:"creating-a-searchpathplugin",level:4}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["The Config Search Path is a list of paths that Hydra searches in order to find ",(0,t.jsx)(n.strong,{children:"non-primary"})," configs. It is\nsimilar to the Python ",(0,t.jsx)(n.code,{children:"PYTHONPATH"}),"."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"When a config is requested, The first matching config in the search path is used."}),"\n",(0,t.jsxs)(n.li,{children:["Each search path element has a schema prefix such as ",(0,t.jsx)(n.code,{children:"file://"})," or ",(0,t.jsx)(n.code,{children:"pkg://"})," that corresponds to a ",(0,t.jsx)(n.code,{children:"ConfigSourcePlugin"}),".","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"file://"})," points to a file system path. It can either be an absolute path or a relative path.\nRelative path will be resolved to absolute based on the current working dir. Path separator is ",(0,t.jsx)(n.code,{children:"/"})," on all Operating\nSystems."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"pkg://"})," points to an importable Python module, with ",(0,t.jsx)(n.code,{children:"."})," being the separator. ",(0,t.jsx)(n.code,{children:"__init__.py"})," files are needed in\ndirectories for Python to treat them as packages."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["You can inspect the search path and the configurations loaded by Hydra via the ",(0,t.jsx)(n.code,{children:"--info"})," flag:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ python my_app.py --info searchpath\n"})}),"\n",(0,t.jsx)(n.p,{children:"There are a few ways to modify the config search path, enabling Hydra to access configuration in\ndifferent locations.\nUse a combination of the methods described below:"}),"\n",(0,t.jsxs)(n.h4,{id:"using-hydramain",children:["Using ",(0,t.jsx)(n.code,{children:"@hydra.main()"})]}),"\n",(0,t.jsxs)(n.p,{children:["Using the  ",(0,t.jsx)(n.code,{children:"config_path"})," parameter ",(0,t.jsx)(n.code,{children:"@hydra.main()"}),".  The ",(0,t.jsx)(n.code,{children:"config_path"})," is relative to location of the Python script."]}),"\n",(0,t.jsxs)(n.h4,{id:"overriding-hydrasearchpath-config",children:["Overriding ",(0,t.jsx)(n.code,{children:"hydra.searchpath"})," config"]}),"\n",(0,t.jsx)(r.C,{text:"Example application",to:"examples/advanced/config_search_path"}),"\n",(0,t.jsxs)(n.p,{children:["In some cases you may want to add multiple locations to the search path.\nFor example, an app may want to read the configs from an additional Python module or\nan additional directory on the file system. Another example is in unit testing,\nwhere the defaults list in a config loaded from the ",(0,t.jsx)(n.code,{children:"tests/configs"})," folder may\nmake reference to another config from the ",(0,t.jsx)(n.code,{children:"app/configs"})," folder. If the\n",(0,t.jsx)(n.code,{children:"config_path"})," or ",(0,t.jsx)(n.code,{children:"config_dir"})," argument passed to ",(0,t.jsx)(n.code,{children:"@hydra.main"})," or to one of the\n",(0,t.jsx)(n.a,{href:"/docs/1.3/advanced/compose_api#initialization-methods",children:"initialization methods"})," points to\n",(0,t.jsx)(n.code,{children:"tests/configs"}),", the configs located in ",(0,t.jsx)(n.code,{children:"app/configs"})," will not be discoverable\nunless Hydra's search path is modified."]}),"\n",(0,t.jsxs)(n.p,{children:["You can configure ",(0,t.jsx)(n.code,{children:"hydra.searchpath"})," in your primary config or from the command line."]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["hydra.searchpath can ",(0,t.jsx)(n.strong,{children:"only"})," be configured in the primary config. Attempting  to configure it in other\nconfigs will result in an error."]})}),"\n",(0,t.jsxs)(n.p,{children:["In this example, we add a second config directory - ",(0,t.jsx)(n.code,{children:"additional_conf"}),", next to the first config directory:"]}),"\n",(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col col--4",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 conf\n\u2502\xa0\xa0 \u251c\u2500\u2500 config.yaml\n\u2502\xa0\xa0 \u2514\u2500\u2500 dataset\n\u2502\xa0\xa0     \u2514\u2500\u2500 cifar10.yaml\n\u251c\u2500\u2500 additional_conf\n\u2502\xa0\xa0 \u251c\u2500\u2500 __init__.py\n\u2502\xa0\xa0 \u2514\u2500\u2500 dataset\n\u2502\xa0\xa0     \u2514\u2500\u2500 imagenet.yaml\n\u2514\u2500\u2500 my_app.py\n"})})}),(0,t.jsx)("div",{className:"col  col--8",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",metastring:'title="my_app.py"',children:'\n@hydra.main(version_base=None, config_path="conf", config_name="config")\ndef my_app(cfg: DictConfig) -> None:\n    print(OmegaConf.to_yaml(cfg))\n\n\nif __name__ == "__main__":\n    my_app()\n'})})})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"conf/config.yaml"})," is the primary config for ",(0,t.jsx)(n.code,{children:"my_app.py"}),", config groups ",(0,t.jsx)(n.code,{children:"cifar10"})," and ",(0,t.jsx)(n.code,{children:"imagenet"})," are\nunder different folders.\nWe can add ",(0,t.jsx)(n.code,{children:"additional_conf"})," to  ",(0,t.jsx)(n.code,{children:"hydra.searchpath"})," for Hydra to discover ",(0,t.jsx)(n.code,{children:"dataset/imagenet"}),"."]}),"\n",(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col col--7",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="config.yaml"',children:"defaults:\n  - dataset: cifar10\n\nhydra:\n  searchpath:\n    - pkg://additional_conf\n    # You can also use file based schema:\n    # - file:///etc/my_app\n    # - file://${oc.env:HOME}/.my_app\n"})})}),(0,t.jsx)("div",{className:"col  col--5",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",metastring:'title="my_app.py output"',children:"dataset:\n  name: cifar10\n  path: /datasets/cifar10\n\n\n\n\n\n\n"})})})]}),"\n",(0,t.jsxs)(n.p,{children:["Overriding ",(0,t.jsx)(n.code,{children:"dataset=imagenet"})," from the commandline:"]}),"\n",(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col col--6",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="command line override"',children:"python my_app.py dataset=imagenet\n\n\n"})})}),(0,t.jsx)("div",{className:"col  col--6",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",metastring:'title="my_app.py output"',children:"dataset:\n  name: imagenet\n  path: /datasets/imagenet\n"})})})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"hydra.searchpath"})," can be defined or overridden via the command line as well:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="command line override"',children:"python my_app.py 'hydra.searchpath=[pkg://additional_conf]'\n"})}),"\n",(0,t.jsxs)(n.h4,{id:"overriding---config-dir-from-the-command-line",children:["Overriding ",(0,t.jsx)(n.code,{children:"--config-dir"})," from the command line"]}),"\n",(0,t.jsxs)(n.p,{children:["This is a less flexible alternative to ",(0,t.jsx)(n.code,{children:"hydra.searchpath"}),".\nSee this ",(0,t.jsx)(n.a,{href:"/docs/1.3/advanced/hydra-command-line-flags",children:"page"})," for more info."]}),"\n",(0,t.jsxs)(n.h4,{id:"creating-a-searchpathplugin",children:["Creating a ",(0,t.jsx)(n.code,{children:"SearchPathPlugin"})]}),"\n",(0,t.jsx)(r.C,{text:"ExampleSearchPathPlugin",to:"examples/plugins/example_searchpath_plugin/"}),"\n",(0,t.jsxs)(n.p,{children:["Framework authors may want to add their configs to the search path automatically once their package is installed,\neliminating the need for any actions from the users.\nThis can be achieved using a ",(0,t.jsx)(n.code,{children:"SearchPathPlugin"}),". Check the example plugin linked above for more details."]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}}}]);