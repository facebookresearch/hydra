"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9670],{21319:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"tutorials/structured_config/config_groups","title":"Config Groups","description":"Structured Configs can be used to implement config groups. Special care needs to be taken when specifying a","source":"@site/docs/tutorials/structured_config/3_config_groups.md","sourceDirName":"tutorials/structured_config","slug":"/tutorials/structured_config/config_groups","permalink":"/docs/tutorials/structured_config/config_groups","draft":false,"unlisted":false,"editUrl":"https://github.com/facebookresearch/hydra/edit/main/website/docs/tutorials/structured_config/3_config_groups.md","tags":[],"version":"current","lastUpdatedBy":"jesszzzz","lastUpdatedAt":1754333694000,"sidebarPosition":3,"frontMatter":{"id":"config_groups","title":"Config Groups"},"sidebar":"docs","previous":{"title":"A hierarchical static configuration","permalink":"/docs/tutorials/structured_config/hierarchical_static_config"},"next":{"title":"Defaults List","permalink":"/docs/tutorials/structured_config/defaults"}}');var i=t(74848),o=t(28453),r=t(49595);const a={id:"config_groups",title:"Config Groups"},c=void 0,l={},d=[{value:"Config inheritance",id:"config-inheritance",level:3},{value:"Missing fields",id:"missing-fields",level:3}];function g(n){const e={admonition:"admonition",code:"code",em:"em",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.C,{to:"examples/tutorials/structured_configs/3_config_groups/my_app.py"}),"\n",(0,i.jsx)(e.p,{children:"Structured Configs can be used to implement config groups. Special care needs to be taken when specifying a\ndefault value for fields populated by a config group. We will look at why below."}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",metastring:'title="Defining a config group for database" {16-17,22-23}',children:'from dataclasses import dataclass\n\nimport hydra\nfrom hydra.core.config_store import ConfigStore\n\n@dataclass\nclass MySQLConfig:\n    driver: str = "mysql"\n    host: str = "localhost"\n    port: int = 3306\n\n@dataclass\nclass PostGreSQLConfig:\n    driver: str = "postgresql"\n    host: str = "localhost"\n    port: int = 5432\n    timeout: int = 10\n\n@dataclass\nclass Config:\n    # We will populate db using composition.\n    db: Any\n\n# Create config group `db` with options \'mysql\' and \'postgreqsl\'\ncs = ConfigStore.instance()\ncs.store(name="config", node=Config)\ncs.store(group="db", name="mysql", node=MySQLConfig)\ncs.store(group="db", name="postgresql", node=PostGreSQLConfig)\n\n@hydra.main(version_base=None, config_name="config")\ndef my_app(cfg: Config) -> None:\n    print(OmegaConf.to_yaml(cfg))\n\nif __name__ == "__main__":\n    my_app()\n'})}),"\n",(0,i.jsx)(e.admonition,{type:"caution",children:(0,i.jsxs)(e.p,{children:["The ",(0,i.jsx)(e.em,{children:"Config"})," class is ",(0,i.jsx)(e.strong,{children:"NOT"})," the Defaults list. We will see the Defaults list in the next page."]})}),"\n",(0,i.jsx)(e.p,{children:"You can select the database from the command line:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"$ python my_app.py +db=postgresql\ndb:\n  driver: postgresql\n  host: localhost\n  password: drowssap\n  port: 5432\n  timeout: 10\n  user: postgres_user\n"})}),"\n",(0,i.jsxs)(e.p,{children:["The ",(0,i.jsx)(e.code,{children:"+"})," above is required because there is no default choice for the config group ",(0,i.jsx)(e.code,{children:"db"}),".\nThe next page will reintroduce the Defaults List, eliminating the need for the ",(0,i.jsx)(e.code,{children:"+"}),"."]}),"\n",(0,i.jsx)(e.h3,{id:"config-inheritance",children:"Config inheritance"}),"\n",(0,i.jsx)(r.C,{to:"examples/tutorials/structured_configs/3_config_groups/my_app_with_inheritance.py"}),"\n",(0,i.jsx)(e.p,{children:"Standard Python inheritance can be used to get improved type safety, and to move common fields to the parent class."}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",metastring:'title="Defining a config group for database using inheritance"',children:'from omegaconf import MISSING\n\n@dataclass\nclass DBConfig:\n    host: str = "localhost"\n    port: int = MISSING\n    driver: str = MISSING\n\n@dataclass\nclass MySQLConfig(DBConfig):\n    driver: str = "mysql"\n    port: int = 3306\n\n@dataclass\nclass PostGreSQLConfig(DBConfig):\n    driver: str = "postgresql"\n    port: int = 5432\n    timeout: int = 10\n\n@dataclass\nclass Config:\n    # We can now annotate db as DBConfig which\n    # improves both static and dynamic type safety.\n    db: DBConfig\n'})}),"\n",(0,i.jsx)(e.h3,{id:"missing-fields",children:"Missing fields"}),"\n",(0,i.jsxs)(e.p,{children:["Assign ",(0,i.jsx)(e.em,{children:"MISSING"})," to a field to indicates that it does not have a default value. This is equivalent to\nthe ",(0,i.jsx)(e.code,{children:"???"})," literal we have seen in OmegaConf configs before."]}),"\n",(0,i.jsxs)(e.p,{children:["Omitting a default value is equivalent to assigning ",(0,i.jsx)(e.em,{children:"MISSING"})," to it, although it is sometimes\nconvenient to be able to assign MISSING it to a field."]}),"\n",(0,i.jsx)(e.admonition,{type:"caution",children:(0,i.jsxs)(e.p,{children:["Do not confuse ",(0,i.jsx)(e.strong,{children:"omegaconf.MISSING"})," with ",(0,i.jsx)(e.strong,{children:"dataclass.MISSING"}),"."]})})]})}function u(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(g,{...n})}):g(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>a});var s=t(96540);const i={},o=s.createContext(i);function r(n){const e=s.useContext(o);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),s.createElement(o.Provider,{value:e},n.children)}},49595:(n,e,t)=>{t.d(e,{A:()=>c,C:()=>l});t(96540);var s=t(28774),i=t(44586),o=t(48295),r=t(74848);function a(n){const e=(0,o.ir)();return(0,i.default)().siteConfig.customFields.githubLinkVersionToBaseUrl[e?.name??"current"]+n}function c(n){return(0,r.jsx)(s.default,{...n,to:a(n.to),target:"_blank"})}function l(n){const e=n.text??"Example (Click Here)";return(0,r.jsxs)(c,{...n,children:[(0,r.jsx)("span",{children:"\xa0"}),(0,r.jsx)("img",{src:"https://img.shields.io/badge/-"+e+"-informational",alt:"Example (Click Here)"})]})}}}]);