"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3139],{5379:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>s,default:()=>l,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"upgrades/1.0_to_1.1/changes_to_hydra_main_config_path","title":"Changes to @hydra.main() and hydra.initialize()","description":"Prior to Hydra 1.1, @hydra.main() and hydra.initialize() default config path was the directory containing the Python app (calling @hydra.main() or hydra.initialize()).","source":"@site/versioned_docs/version-1.3/upgrades/1.0_to_1.1/hydra_main_config_path.md","sourceDirName":"upgrades/1.0_to_1.1","slug":"/upgrades/1.0_to_1.1/changes_to_hydra_main_config_path","permalink":"/docs/1.3/upgrades/1.0_to_1.1/changes_to_hydra_main_config_path","draft":false,"unlisted":false,"editUrl":"https://github.com/facebookresearch/hydra/edit/main/website/versioned_docs/version-1.3/upgrades/1.0_to_1.1/hydra_main_config_path.md","tags":[],"version":"1.3","lastUpdatedBy":"jesszzzz","lastUpdatedAt":1754330894000,"frontMatter":{"id":"changes_to_hydra_main_config_path","title":"Changes to @hydra.main() and hydra.initialize()"},"sidebar":"docs","previous":{"title":"Changes to configuring sweeper\'s search space","permalink":"/docs/1.3/upgrades/1.1_to_1.2/changes_to_sweeper_config"},"next":{"title":"Changes to default composition order","permalink":"/docs/1.3/upgrades/1.0_to_1.1/default_composition_order"}}');var a=n(74848),o=n(28453);const r={id:"changes_to_hydra_main_config_path",title:"Changes to @hydra.main() and hydra.initialize()"},s=void 0,c={},d=[{value:"Dedicated config directory",id:"dedicated-config-directory",level:3},{value:"No config directory",id:"no-config-directory",level:3},{value:"Using the application directory",id:"using-the-application-directory",level:3}];function h(e){const i={a:"a",br:"br",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.p,{children:["Prior to Hydra 1.1, ",(0,a.jsx)(i.strong,{children:"@hydra.main()"})," and ",(0,a.jsx)(i.strong,{children:"hydra.initialize()"})," default ",(0,a.jsx)(i.code,{children:"config path"})," was the directory containing the Python app (calling ",(0,a.jsx)(i.strong,{children:"@hydra.main()"})," or ",(0,a.jsx)(i.strong,{children:"hydra.initialize()"}),")."]}),"\n",(0,a.jsx)(i.p,{children:"This can cause unexpected behavior:"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:["Sibling directories are interpreted as config groups, which can lead to surprising results (See ",(0,a.jsx)(i.a,{href:"https://github.com/facebookresearch/hydra/issues/1533",children:"#1533"}),")."]}),"\n",(0,a.jsxs)(i.li,{children:["The subtree added automatically can have many files/directories - which will cause ",(0,a.jsx)(i.strong,{children:"--help"})," to be very slow as it's scanning for all config groups/config files (See ",(0,a.jsx)(i.a,{href:"https://github.com/facebookresearch/hydra/issues/759",children:"#759"}),")."]}),"\n"]}),"\n",(0,a.jsxs)(i.p,{children:["To address these issues, Hydra 1.1 issues a warning if the config_path is not specified.",(0,a.jsx)(i.br,{}),"\n","Your options are as follows:"]}),"\n",(0,a.jsx)(i.h3,{id:"dedicated-config-directory",children:"Dedicated config directory"}),"\n",(0,a.jsx)(i.p,{children:'For applications with config files, specify a directory like "conf" to use a dedicated config directory relative to the application.'}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:'@hydra.main(config_path="conf")\n# or:\nhydra.initialize(config_path="conf")\n'})}),"\n",(0,a.jsx)(i.h3,{id:"no-config-directory",children:"No config directory"}),"\n",(0,a.jsxs)(i.p,{children:["For applications that do not define config files next to the Python script (typically applications using only Structured Configs), it is recommended that\nyou pass ",(0,a.jsx)(i.code,{children:"None"})," as the config_path, indicating that no directory should be added to the config search path.\nThis will become the default with ",(0,a.jsx)(i.a,{href:"/docs/1.3/upgrades/version_base",children:"version_base"}),' >= "1.2"']}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:"@hydra.main(config_path=None)\n# or:\nhydra.initialize(config_path=None)\n"})}),"\n",(0,a.jsx)(i.h3,{id:"using-the-application-directory",children:"Using the application directory"}),"\n",(0,a.jsxs)(i.p,{children:["Use the directory/module of the Python script.\nThis was the default behavior up to Hydra 1.0.",(0,a.jsx)(i.br,{}),"\n","This is not recommended as it can cause the surprising behavior outlined above."]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-python",children:'@hydra.main(config_path=".")\n# or:\nhydra.initialize(config_path=".")\n'})})]})}function l(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,a.jsx)(i,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},28453:(e,i,n)=>{n.d(i,{R:()=>r,x:()=>s});var t=n(96540);const a={},o=t.createContext(a);function r(e){const i=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function s(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(o.Provider,{value:i},e.children)}}}]);